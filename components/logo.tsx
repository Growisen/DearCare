"use client";

import { useEffect, useRef } from "react";
import { gsap } from "gsap";

const DearCareLogo = ({ onComplete }: { onComplete: () => void }) => {
  const containerRef = useRef<HTMLDivElement | null>(null);
  const logoRef = useRef<SVGSVGElement | null>(null);
  const pathRefs = useRef<Array<SVGPathElement | null>>([]);
  const xRef = useRef<SVGPathElement | null>(null);
  
    useEffect(() => {
      if (!logoRef.current || !pathRefs.current.every(ref => ref)) return;
  
      const tl = gsap.timeline({ onComplete });
      const particles = Array.from({ length: 20 }, () => {
        const particle = document.createElementNS("http://www.w3.org/2000/svg", "circle");
        particle.setAttribute("r", "2");
        particle.setAttribute("fill", "rgba(255, 255, 255, 0.6)");
        if (logoRef.current) {
          logoRef.current.appendChild(particle);
        }
        return particle;
      });
  
      particles.forEach(particle => {
        gsap.set(particle, { 
          x: -450 + Math.random() * 1372,
          y: -280 + Math.random() * 755 
        });
        gsap.to(particle, {
          duration: 2 + Math.random() * 2,
          x: "+=100",
          y: "-=100",
          opacity: 0,
          ease: "power1.out",
          repeat: -1
        });
      });
  
      gsap.set(pathRefs.current, { opacity: 0 });
      pathRefs.current.forEach((path, index) => {
        if (!path) return;
        const length = path.getTotalLength();
        gsap.set(path, {
          strokeDasharray: length,
          strokeDashoffset: length,
          opacity: 1,
          fill: "none",
          stroke: index === 4 ? "#FF8D2F" : "rgba(255, 255, 255, 0.9)"
        });
  
        tl.to(path, {
          strokeDashoffset: 0,
          duration: 0.6,
          ease: "power2.inOut"
        }).to(path, {
          fill: index === 4 ? "#FF8D2F" : "rgba(255, 255, 255, 0.9)",
          duration: 0.3
        }, "-=0.2");
      });
      tl.to(logoRef.current, { opacity: 0, duration: 0.3 });
  
      return () => particles.forEach(p => p.remove());
    }, [onComplete]);
  
    return (
      <div ref={containerRef} className="flex items-center justify-center h-screen w-screen bg-gradient-to-br from-dCblue to-[#1a1f35] overflow-hidden">
        <div className="relative w-full h-auto max-w-screen-lg mx-auto">
          <div className="absolute inset-0 bg-[radial-gradient(circle_at_center,rgba(255,255,255,0.1)_0%,transparent_70%)]" />
          <svg
            ref={logoRef}
            viewBox="-450 -280 1372 755"
            xmlns="http://www.w3.org/2000/svg"
            preserveAspectRatio="xMidYMid meet"
            className="w-full h-auto relative z-10"
          >
        <path ref={(el) => { pathRefs.current[0] = el; }} d="M23.0091 12.0213V76.9901C25.2784 77.8823 28.3131 78.7978 32.1131 79.7365C35.9109 80.6751 39.9819 81.1445 44.3259 81.1445C48.6675 81.1445 52.6395 80.3309 56.2427 78.6973C59.8443 77.0663 62.9531 74.7426 65.5691 71.7261C68.1829 68.7101 70.2061 65.0514 71.6387 60.7501C73.0691 56.4482 73.7845 51.6271 73.7851 46.2869C73.7845 39.9583 72.7731 34.3709 70.7507 29.5245C68.7267 24.6802 66.0867 20.6263 62.8307 17.3629C59.5736 14.0989 55.9467 11.6261 51.9499 9.94447C47.952 8.26447 43.9797 7.42394 40.0331 7.42287C36.48 7.4234 33.2725 7.69567 30.4107 8.23967C27.5472 8.7826 25.0307 9.44954 22.8611 10.2405C22.9592 10.6378 23.0085 11.2314 23.0091 12.0213ZM48.3235 89.8781C41.7101 89.8781 36.3808 89.1874 32.3355 87.8061C28.2875 86.4258 25.1787 85.0442 23.0091 83.6613V88.8421H5.68908V10.0877C5.68908 8.5106 5.17094 7.40047 4.13468 6.75727C3.09841 6.1162 1.74134 5.79541 0.0634766 5.79487V3.72207C1.04908 3.033 2.08534 2.44074 3.17228 1.94527C4.15841 1.45354 5.31814 1.03434 6.65147 0.687671C7.98321 0.342604 9.43894 0.170068 11.0187 0.170068C14.1749 0.170068 16.5928 0.687936 18.2723 1.72367C19.9485 2.76047 21.1821 4.11754 21.9731 5.79487C24.4392 4.41407 27.5725 3.10634 31.3731 1.87167C35.1709 0.638607 39.5381 0.0218041 44.4747 0.0212708C51.8752 0.0212708 58.5859 1.13167 64.6067 3.35247C70.6264 5.5722 75.7584 8.60687 80.0027 12.4565C84.2443 16.3045 87.5267 20.8717 89.8467 26.1493C92.1651 31.4293 93.3248 37.1781 93.3259 43.3957C93.3259 50.4047 92.1168 56.7703 89.6987 62.4925C87.28 68.2167 83.9987 73.1018 79.8547 77.1477C75.7091 81.1951 70.9224 84.3285 65.4947 86.5477C60.0664 88.7679 54.3427 89.8781 48.3235 89.8781Z" />
        <path ref={(el) => { pathRefs.current[1] = el; }} d="M122.976 38.9828C120.803 38.9834 118.854 39.526 117.128 40.6108C115.4 41.6983 113.895 43.1292 112.613 44.9036C111.329 46.6812 110.293 48.6554 109.504 50.826C108.713 52.9983 108.22 55.1692 108.024 57.3388C109.8 57.2423 111.7 57.0202 113.724 56.6724C115.744 56.3284 117.72 55.9092 119.644 55.4148C121.569 54.922 123.346 54.3298 124.974 53.638C126.602 52.9484 127.86 52.1588 128.748 51.2692C129.834 50.1849 130.623 48.9268 131.117 47.4948C131.61 46.0655 131.684 44.7332 131.34 43.498C130.993 42.2644 130.154 41.2034 128.823 40.3148C127.49 39.4268 125.541 38.9828 122.976 38.9828ZM122.532 32.3212C126.381 32.3218 130.229 33.0372 134.078 34.4676C137.926 35.8991 141.109 37.725 143.626 39.9452C146.142 42.1655 147.647 44.682 148.141 47.4948C148.634 50.3076 147.45 53.0463 144.588 55.7108C143.108 57.0938 140.888 58.2039 137.927 59.0412C134.965 59.8812 131.733 60.4983 128.231 60.8924C124.727 61.2881 121.174 61.5348 117.572 61.6324C113.969 61.7311 110.786 61.7804 108.024 61.7804C108.517 66.9121 110.293 71.0324 113.353 74.1412C116.411 77.2495 121 78.8036 127.12 78.8036C130.968 78.8042 134.25 78.2367 136.964 77.1012C139.677 75.9684 141.873 74.7103 143.552 73.3268C145.526 71.6495 147.154 69.7743 148.437 67.7012L150.066 67.998C150.262 70.6625 149.793 73.3271 148.66 75.9916C147.524 78.6567 145.821 81.0252 143.552 83.0972C141.281 85.1703 138.419 86.8481 134.966 88.1308C131.51 89.4124 127.513 90.0538 122.976 90.0548C118.928 90.0548 115.005 89.5367 111.207 88.5004C107.406 87.4641 103.977 85.8359 100.918 83.6156C97.8577 81.3948 95.4153 78.582 93.5908 75.1772C91.7636 71.7729 90.8505 67.6527 90.8516 62.8164C90.8516 58.5732 91.6412 54.6009 93.2204 50.8996C94.7985 47.1988 96.9945 43.9666 99.8084 41.2028C102.62 38.4407 105.976 36.2698 109.875 34.69C113.772 33.1114 117.991 32.3218 122.532 32.3212Z" />
        <path ref={(el) => { pathRefs.current[2] = el; }} d="M172.412 81.914C173.794 81.914 175.151 81.6423 176.484 81.0988C177.816 80.5585 179.074 79.8924 180.258 79.1004C180.158 78.6087 180.084 78.0908 180.036 77.5468C179.986 77.0044 179.961 76.4369 179.962 75.8444V60.0044C177.692 60.5969 175.57 61.4111 173.596 62.4468C171.622 63.4841 169.895 64.6439 168.416 65.926C166.935 67.2097 165.8 68.5668 165.011 69.9972C164.22 71.4287 163.875 72.8841 163.975 74.3636C164.171 76.2399 164.837 77.9671 165.973 79.5452C167.106 81.1249 169.252 81.9145 172.412 81.914ZM198.467 75.2524C198.466 76.8327 198.787 78.4855 199.429 80.2108C200.069 81.9383 201.229 83.098 202.908 83.69C203.696 83.8884 204.288 83.9871 204.684 83.986L204.832 85.9108C204.338 86.5028 203.647 87.0207 202.76 87.4644C201.871 87.9087 200.958 88.2788 200.021 88.5748C199.082 88.8713 198.12 89.0935 197.134 89.2412C196.146 89.39 195.307 89.4641 194.617 89.4636C192.249 89.4631 190.004 88.9695 187.882 87.9828C185.759 86.9972 184.008 85.6649 182.627 83.986C180.948 85.6649 178.9 87.0959 176.484 88.2788C174.064 89.4636 171.228 90.0556 167.972 90.0556C161.458 90.0551 156.474 88.7721 153.02 86.2068C149.565 83.6415 147.838 79.9404 147.839 75.1036C147.839 70.862 149.023 67.4575 151.392 64.89C153.76 62.3241 156.597 60.3009 159.904 58.8204C163.209 57.3404 166.713 56.3287 170.414 55.7852C174.115 55.2439 177.298 54.9233 179.962 54.8236V49.346C179.961 48.162 179.764 46.9777 179.37 45.7932C178.974 44.6092 178.382 43.5481 177.594 42.61C176.804 41.674 175.817 40.8847 174.633 40.242C173.448 39.6004 172.017 39.2796 170.34 39.2796C167.871 39.2807 165.774 39.922 164.048 41.2036C162.32 42.4873 161.556 44.2639 161.754 46.5332C161.851 48.1135 161.333 49.5937 160.2 50.974C159.064 52.3569 157.411 53.0479 155.24 53.0468C153.464 53.0473 151.91 52.5047 150.577 51.4188C149.244 50.3335 148.48 49.0012 148.283 47.422C148.184 45.6449 148.727 43.8684 149.912 42.0924C151.096 40.3159 152.773 38.6873 154.944 37.2068C157.114 35.7263 159.631 34.5423 162.494 33.6548C165.356 32.7663 168.415 32.322 171.672 32.322C176.112 32.3225 179.986 32.9639 183.293 34.246C186.598 35.5313 189.337 37.1844 191.509 39.2052C193.679 41.2297 195.332 43.4503 196.468 45.8668C197.601 48.2865 198.267 50.6305 198.467 52.8988C198.663 56.5511 198.712 60.178 198.615 63.7796C198.516 67.3823 198.466 71.2065 198.467 75.2524Z" />
        <path ref={(el) => { pathRefs.current[3] = el; }} d="M240.685 33.3716C237.921 33.3716 235.257 34.038 232.691 35.3708C230.124 36.7031 227.263 38.8002 224.105 41.662C223.413 37.9127 221.983 35.322 219.812 33.89C217.64 32.4596 215.124 31.7442 212.263 31.7436C210.879 31.7436 209.547 31.9658 208.265 32.41C206.982 32.8538 205.798 33.3226 204.712 33.8164C203.528 34.4084 202.393 35.0991 201.308 35.8884L201.456 37.8132C202.837 37.8132 204.12 38.1831 205.304 38.9228C206.489 39.6642 207.081 41.3175 207.081 43.8828V89.878L224.401 90.0548V48.7676C225.783 47.486 227.065 46.4252 228.25 45.5852C229.435 44.7476 230.42 44.03 231.211 43.438C232.197 42.8471 232.987 42.3044 233.58 41.81C233.775 42.994 234.219 44.0303 234.912 44.9188C235.267 45.4884 235.781 46.0044 236.445 46.4708C237.807 41.8076 240.444 37.4924 242.948 33.4844C242.448 33.4308 241.235 33.3716 240.685 33.3716Z" /> 
        <path ref={(el) => { pathRefs.current[4] = el; xRef.current = el; }} d="M322.31 25.0708C321.5 24.6164 320.694 24.1572 319.881 23.7084C310.978 18.7948 301.334 16.4228 291.268 17.75C271.917 20.3012 258.222 30.5164 251.122 48.7188C248.118 56.4212 247.256 64.4476 248.753 72.5212C250.991 84.586 257.001 94.5692 266.86 102.17C269.303 104.053 272.374 103.68 275.697 101.215C277.205 100.096 278.559 98.6948 280.211 97.8668C282.296 96.822 284.561 95.8316 286.844 95.5236C293.369 94.6436 299.616 93.1764 305.183 89.4884C305.721 89.1316 307.069 89.1148 307.4 89.4892C307.99 90.1572 308.485 91.3204 308.324 92.1452C307.773 94.9532 305.631 96.5284 303.166 97.7316C301.179 98.702 299.142 99.5916 297.244 100.708C296.455 101.172 295.859 102.071 295.363 102.882C294.04 105.05 294.699 106.578 297.156 107.184C302.489 108.498 307.576 107.105 312.681 105.782C317.601 104.505 322.12 102.436 326.346 99.6292C327.316 98.9852 328.775 99.0604 330.009 98.8044C329.628 100.04 329.604 101.588 328.812 102.462C321.392 110.636 312.413 116.292 301.588 119.28C289.549 122.6 277.824 121.828 266.404 117.369C254.571 112.749 245.41 104.889 239.047 93.9172C233.621 84.5612 230.964 74.5228 231.784 63.79C233.203 45.2484 241.775 30.6868 257.771 20.5724C266.796 14.8668 276.749 12.0644 287.443 12.1564C300.421 12.2692 312.021 16.3476 322.141 24.3772C322.277 24.486 322.38 24.6364 322.498 24.7676L322.31 25.0708Z" /> 
        <path ref={(el) => { pathRefs.current[5] = el; }} d="M295.687 81.6244C297.068 81.6244 298.425 81.3527 299.758 80.8092C301.09 80.2689 302.348 79.6028 303.532 78.8108C303.433 78.3191 303.359 77.8012 303.311 77.2572C303.26 76.7148 303.235 76.1473 303.236 75.5548V59.7148C300.966 60.3073 298.844 61.1215 296.871 62.1572C294.896 63.1945 293.17 64.3543 291.69 65.6364C290.209 66.9201 289.074 68.2772 288.285 69.7076C287.494 71.1391 287.149 72.5945 287.249 74.074C287.446 75.9503 288.112 77.6775 289.248 79.2556C290.38 80.8353 292.527 81.6249 295.687 81.6244ZM321.741 74.9628C321.74 76.5431 322.061 78.1959 322.704 79.9212C323.344 81.6487 324.503 82.8084 326.182 83.4004C326.971 83.5988 327.563 83.6975 327.958 83.6964L328.106 85.6212C327.612 86.2132 326.922 86.7311 326.034 87.1748C325.146 87.6191 324.233 87.9892 323.296 88.2852C322.356 88.5817 321.394 88.8039 320.408 88.9516C319.42 89.1004 318.581 89.1745 317.892 89.174C315.523 89.1735 313.278 88.6799 311.156 87.6932C309.034 86.7076 307.282 85.3753 305.901 83.6964C304.222 85.3753 302.175 86.8063 299.758 87.9892C297.338 89.174 294.503 89.766 291.246 89.766C284.732 89.7655 279.748 88.4825 276.294 85.9172C272.839 83.3519 271.112 79.6508 271.113 74.814C271.113 70.5724 272.298 67.1679 274.666 64.6004C277.034 62.0345 279.871 60.0113 283.178 58.5308C286.484 57.0508 289.987 56.0391 293.688 55.4956C297.389 54.9543 300.572 54.6337 303.236 54.534V49.0564C303.235 47.8724 303.038 46.6881 302.644 45.5036C302.249 44.3196 301.657 43.2585 300.868 42.3204C300.078 41.3844 299.091 40.5951 297.908 39.9524C296.723 39.3108 295.291 38.99 293.614 38.99C291.146 38.9911 289.049 39.6324 287.323 40.914C285.595 42.1977 284.83 43.9743 285.028 46.2436C285.126 47.8239 284.607 49.3041 283.474 50.6844C282.338 52.0673 280.685 52.7583 278.515 52.7572C276.739 52.7577 275.184 52.2151 273.852 51.1292C272.519 50.0439 271.754 48.7116 271.557 47.1324C271.458 45.3553 272.001 43.5788 273.186 41.8028C274.37 40.0263 276.048 38.3977 278.219 36.9172C280.388 35.4367 282.905 34.2527 285.768 33.3652C288.63 32.4767 291.69 32.0324 294.947 32.0324C299.387 32.0329 303.26 32.6743 306.568 33.9564C309.873 35.2417 312.611 36.8948 314.784 38.9156C316.953 40.9401 318.606 43.1607 319.743 45.5772C320.876 47.9969 321.542 50.3409 321.741 52.6092C321.937 56.2615 321.986 59.8884 321.889 63.49C321.79 67.0927 321.741 70.9169 321.741 74.9628Z" />
        <path ref={(el) => { pathRefs.current[6] = el; }} d="M349.087 87.1756H331.767V44.3932C331.767 41.8279 331.174 40.1748 329.99 39.434C328.805 38.6943 327.523 38.3244 326.141 38.3244L325.993 36.3996C327.078 35.6103 328.213 34.9193 329.398 34.3268C330.483 33.8335 331.668 33.3649 332.951 32.9212C334.232 32.4769 335.565 32.2548 336.948 32.2548C339.809 32.2553 342.326 32.9708 344.498 34.4012C346.668 35.8327 348.099 38.4233 348.791 42.1732C351.948 39.3113 354.81 37.2143 357.376 35.882C359.942 34.5492 362.606 33.8828 365.371 33.8828C367.936 33.8839 369.984 34.4516 371.514 35.586C373.043 36.7215 373.906 38.2756 374.104 40.2484C374.302 42.2239 373.808 44.0743 372.624 45.7996C371.44 47.5276 369.367 48.3913 366.407 48.3908C364.531 48.3908 363.051 48.0945 361.966 47.502C360.879 46.9111 360.089 46.2201 359.597 45.4292C358.905 44.5412 358.461 43.5052 358.265 42.3212C357.672 42.8161 356.882 43.3588 355.896 43.9492C355.106 44.5423 354.119 45.2577 352.936 46.0956C351.751 46.9361 350.468 47.9972 349.087 49.2788V87.1756Z" />
        <path ref={(el) => { pathRefs.current[7] = el; }} d="M402.576 38.9836C400.403 38.9841 398.454 39.5268 396.728 40.6116C395 41.6991 393.495 43.13 392.213 44.9044C390.93 46.682 389.893 48.6561 389.104 50.8268C388.314 52.9991 387.82 55.17 387.624 57.3396C389.4 57.2431 391.3 57.0209 393.324 56.6732C395.344 56.3292 397.32 55.91 399.244 55.4156C401.169 54.9228 402.946 54.3305 404.574 53.6388C406.202 52.9492 407.46 52.1596 408.348 51.27C409.434 50.1857 410.223 48.9276 410.717 47.4956C411.21 46.0663 411.284 44.734 410.94 43.4988C410.594 42.2652 409.755 41.2041 408.423 40.3156C407.09 39.4276 405.141 38.9836 402.576 38.9836ZM402.132 32.322C405.981 32.3225 409.83 33.038 413.678 34.4684C417.527 35.8999 420.709 37.7257 423.226 39.946C425.742 42.1663 427.247 44.6828 427.741 47.4956C428.234 50.3084 427.05 53.0471 424.188 55.7116C422.708 57.0945 420.488 58.2047 417.527 59.042C414.565 59.882 411.333 60.4991 407.831 60.8932C404.327 61.2889 400.774 61.5356 397.172 61.6332C393.569 61.7319 390.386 61.7812 387.624 61.7812C388.117 66.9129 389.893 71.0332 392.953 74.142C396.011 77.2503 400.6 78.8044 406.72 78.8044C410.568 78.8049 413.85 78.2375 416.564 77.102C419.278 75.9692 421.474 74.7111 423.152 73.3276C425.126 71.6503 426.754 69.7751 428.037 67.702L429.666 67.9988C429.862 70.6633 429.393 73.3279 428.26 75.9924C427.124 78.6575 425.421 81.026 423.152 83.098C420.882 85.1711 418.019 86.8489 414.566 88.1316C411.11 89.4132 407.113 90.0545 402.576 90.0556C398.528 90.0556 394.605 89.5375 390.807 88.5012C387.006 87.4649 383.577 85.8367 380.518 83.6164C377.458 81.3956 375.015 78.5828 373.191 75.178C371.364 71.7737 370.451 67.6535 370.452 62.8172C370.452 58.574 371.241 54.6017 372.82 50.9004C374.399 47.1996 376.595 43.9673 379.408 41.2036C382.22 38.4415 385.576 36.2705 389.475 34.6908C393.372 33.1121 397.591 32.3225 402.132 32.322Z" />
      </svg>
    </div>
    </div>
    
  );
};

export default DearCareLogo;